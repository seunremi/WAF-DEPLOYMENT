AWSTemplateFormatVersion: 2010-09-09
Parameters:
loadbalancer:
Type: String
Default: WAT-testing

Description: ALB WAF
Resources:
  WebACL:
    Type: AWS::WAFv2::WebACL
    Properties:
      Name: Peoplesoft92-WAF
      Scope: REGIONAL
      Description: This is the Peoplesoft92 ALB WAF
      DefaultAction:
        Allow: {}
  MyWebACLAssociation:
    Type: "AWS::WAFRegional::WebACLAssociation"
    Properties:
     ResourceArn: 
      Ref: loadbalancer
    WebACLId:
      Ref: MyWebACL
      VisibilityConfig:
        SampledRequestsEnabled: true
        CloudWatchMetricsEnabled: true
        MetricName: ALB-WAF
      Rules:
        - Name: F5-OWASP_Managed
          Priority: 0
          OverrideAction:
            None: {}
          VisibilityConfig:
            SampledRequestsEnabled: true
            CloudWatchMetricsEnabled: true
            MetricName: F5-OWASP_Managed
          Statement:
            ManagedRuleGroupStatement:
              VendorName: F5
              Name: OWASP_Managed
              
              
              
